
resource_registry:
  OS::TripleO::Services::ContrailCertmongerUser: OS::Heat::None

parameter_defaults:
  ContrailSslEnabled: true
  ContrailServiceCertFile: '/etc/contrail/ssl/certs/server.pem'
  ContrailServiceKeyFile: '/etc/contrail/ssl/private/server-privkey.pem'

  ContrailCA: 'local'
  ContrailCaCertFile: '/etc/contrail/ssl/certs/ca-cert.pem'
  ContrailCaKeyFile: '/etc/contrail/ssl/private/ca-key.pem'


{%- if EXTERNAL_CONTROLLER_NODES | default('') != '' %}
  # For external nodes operator case it is needed to force enable api ssl for neutron plugin
  # as operator is always with ssl
  # for case with own opeartor role neutron plugins works via vip that is w/o ssl 
  # in case if no IPA (local cert)
  ControllerExtraConfig:
    contrail_internal_api_ssl: True
{%- endif %}

  ContrailCaCert: |
{%- for line in SSL_CACERT.split('\n') %}
    {{ line }}
{%- endfor %}

  ContrailCaKey: |
{%- for line in SSL_CAKEY.split('\n') %}
    {{ line }}
{%- endfor %}
